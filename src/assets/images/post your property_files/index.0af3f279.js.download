define("services/enquiryService",["services/apiService"],function(){return Box.Application.addService("enquiryService",function(){function e(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}var n=Box.Application.getService("ApiService"),t={takeAction:"/xhr/enquiries/takeAction",getLeads:"/xhr/enquiries/closableLeads",getPayableLeads:"/xhr/enquiries/payableLeads",changeStatusToClosed:"/xhr/enquiries/changeStatusToClosed",getCashbackLeadDetails:"/xhr/enquiries/getCashbackLeadDetails",changePrepaidStatusToClosed:"/xhr/enquiries/changePrepaidStatusToClosed",changeStatusToClosedForCBLead:"/xhr/enquiries/changeStatusToClosedForCBLead",getLeadStats:"/xhr/enquiries/getLeadStats",getPhantomLeads:function(e){return"/xhr/enquiries/getPhantomLeads/"+e},getEnquiresCountInTime:"xhr/enquiries/getEnquiresCountInTime",getInstantEnquiriesCount:"xhr/enquiries/getInstantEnquiriesCount?instantLeads=true",changeCouponStatus:"xhr/enquiries/changeCouponStatus"},i=function(){return n.get(t.takeAction)},o=function(i){return n.get(t.getLeads+(i&&void 0!=i?"?"+e(i):""))},a=function(i){return n.get(t.getCashbackLeadDetails+(i&&void 0!=i?"?"+e(i):""))},r=function(i){return n.get(t.getPayableLeads+(i&&void 0!=i?"?"+e(i):""))},u=function(e){return e&&e.leads?n.putJSON(t.changeStatusToClosed,e):void 0},c=function(e){return e&&e.leads?n.putJSON(t.changePrepaidStatusToClosed,e):void 0},s=function(e){return e&&e.leads?n.putJSON(t.changeStatusToClosedForCBLead,e):void 0},d=function(e){var i=this;return i.leadStats?new Promise(function(e,n){i.leadStats?e(i.leadStats):n()}):i.leadStats=n.get(t.getLeadStats)},p=function(i,o){return n.get(t.getPhantomLeads(o)+(i&&void 0!=i?"?"+e(i):""))},l=function(){return n.get(t.getEnquiresCountInTime)},g=function(){return n.get(t.getInstantEnquiriesCount)},v=function(e){return n.putJSON(t.changeCouponStatus,e)};return{getLeads:o,getTakeAction:i,getPayableLeads:r,changeStatusToClosed:u,getCashbackLeadDetails:a,changeStatusToClosedForCBLead:s,getLeadStats:d,getPhantomLeads:p,changePrepaidStatusToClosed:c,getEnquiresCountInTime:l,getInstantEnquiriesCount:g,changeCouponStatus:v}}),Box.Application.getService("enquiryService")}),define("doT!modules/payReportNow/views/pay-report-now",function(){return function(e){var n='<span class="btnv2 btnv2-p" data-type="report-now" href="/my-dashboard#reportingModalPopup" data-trigger="ga-geMarkTransaction" data-open-popup="reporting">report now</span><span class="btnv2 btnv2-p hide" data-type="pay-now" href="/my-dashboard#paymentModalPopup" data-trigger="ga-gePayNow" data-open-popup="payment" >pay now';return e.showTooltip&&(n+="<span class='tool-tip hidden-xs'>Payment worth INR <strong>"+e.amountToBePaid+"</strong> is pending for the successful deals you have reported. Pay now to enjoy the benefits of more leads</span>     "),n+="</span>"}}),define("doT!modules/payReportNow/views/request-removal",function(){return function(e){var n='<div class="btn-wrap"> <div class="btnv2 btnv2-p" data-type="remove-penalization">Remove Restriction</div></div>  ';return n}}),define("services/gaTrackingService",["common/utilFunctions"],function(e){var n="gaTrackingService";return Box.Application.addService(n,function(n){function t(){var e=m.getQueuedItems({clearQueue:!0});for(var n in e)a(e[n].event,e[n].properties)}function i(){if(l){p=!0;for(var e in l)v("set",c[e],l[e])}}function o(){"function"==typeof v?(t(),i()):setTimeout(o,s)}function a(e,n){"function"==typeof v?(u([e,n]),v("send","event",n.category,e,n.label,n.value||void 0)):(m.addToQueue({event:e,properties:n}),g||(g=!0,o()))}function r(e){l=e,"function"!=typeof v?g||(g=!0,o()):i()}function u(e,n){(d||n)&&("string"==typeof e?console.log(e):console.log.apply(console,e))}var c={sellerId:"dimension3",sellerType:"dimension2",listingSubtype:"dimension68",propertyType:"dimension72"},s=2e3,d=!1,p=!1,l=void 0,g=!1,v=window.ga,f=e.getAllQueryStringParam();f.GA_DEBUG&&(d=!0);var m=new e.MessageQueue({type:"ga-events"});return{trackEvent:a,setIdentity:r}}),Box.Application.getService(n)}),define("services/amplitudeTrackingService",["common/utilFunctions"],function(e){var n="amplitudeTrackingService";return Box.Application.addService(n,function(){function n(){var e=c.getQueuedItems({clearQueue:!0});for(var n in e)i(e[n].event,e[n].properties)}function t(e){require(["amplitude"],function(t){t&&e.amplitudeTrackingId&&(t.getInstance().init(e.amplitudeTrackingId),u=t,n())})}function i(e,n){"undefined"!=typeof u&&"function"==typeof u.getInstance?(r([e,n]),u.logEvent(e,n)):c.addToQueue({event:e,properties:n})}function o(e){"undefined"!=typeof u&&"function"==typeof u.getInstance&&(u.getInstance().setUserId(e.sellerId),u.getInstance().setUserProperties(e))}function a(e,n){var t={url:document.location.href,path:document.location.pathname};i("pageview",t)}function r(e,n){(s||n)&&("string"==typeof e?console.log(e):console.log.apply(console,e))}var u,c;c=new e.MessageQueue({type:"amplitude"});var s=!1,d=e.getAllQueryStringParam();return d.AMPLITUDE_DEBUG&&(s=!0),{trackEvent:i,setIdentity:o,firePageView:a,loadTracking:t}}),Box.Application.getService(n)}),define("services/irisTrackingService",["common/utilFunctions","common/sharedConfig","services/apiService"],function(e,n,t){"use strict";var i="IRISTrackingService";return Box.Application.addService(i,function(){function n(n){e.setcookie("iris_id",n,s,d.toGMTString())}function t(){var t=e.getCookie("iris_id");return t||(t=e.getCookie("ajs_anonymous_id"),t=t?t.replace(/%22/g,""):e.uuidGenerator(),n(t)),t}function i(n,i){u||(u=t());var o=location.hostname.split(".");o.pop(),o.pop(),{message:[{messageId:e.uuidGenerator(),anonymousId:u,event:n,properties:i,url:document.location.href,path:document.location.pathname,title:document.title,userAgent:navigator.userAgent,ip:e.getCookie("USER_IP"),timestamp:Date.now(),userId:r,projectId:window.IRIS_PROJECT_ID}]}}function o(e,n){var t={url:document.location.href,path:document.location.pathname};i("pageview",t)}function a(e){r=e}var r,u,c=e.getSubdomain(),s=window.location.host;s=c?s.replace(c,""):"."+s;var d=new Date(Date.now()+31536e6);return{trackEvent:i,firePageView:o,setIdentity:a}}),Box.Application.getService(i)}),define("modules/gaTracking/scripts/services/gaTracking",["services/utils","services/gaTrackingService","services/amplitudeTrackingService","services/irisTrackingService"],function(e,n,t,i){return Box.Application.addService("gaTracking",function(){function e(e){r("setIdentity",[e])}function o(){r("firePageView")}function a(e){r("loadTracking",[e])}function r(e){var n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];for(var t in u)"function"==typeof u[t][e]&&u[t][e].apply(u[t],n)}var u={ga:n,amplitude:t,iris:i},c=[],s=[],d=[],p=!1,l=Box.Application.getService("Utils"),g=function(e,n,t,i){return"scroll"!==e?void n.on(e,function(){h(t)}):(c.push(i),n.length>0&&s.push(n.offset().top),d.push(t),void(window.onscroll=function(){for(var e=$(window).scrollTop(),n=0;n<s.length;n++)e>s[n]+c[n]&&e<s[n]+c[n]+50&&h(d[n])}))},v=function(e,n,t,i){m(e,n,t,i),f(e,n,t,i)},f=function(e,n,t,i){n.on(e,function(){return n[0].currentTime>=n[0].duration/2&&!p?(t.label="half",void h(t)):void(n[0].currentTime<n[0].duration/2&&(p=!1))})},m=function(e,n,t,i){n.on(e,function(){n[0].currentTime===n[0].duration&&(t.label="full",h(t))})},h=function(e){var n=l.getDeviceType(),t=e.label,i=e.action;n&&!e.noDeviceType&&(t=n+"_"+t,i=n+"_"+i);var o={category:e.category,label:t};e.value&&(o.value=e.value),r("trackEvent",[i,o])};return{trackSection:function(e,n,t,i){return g(e,n,t,i)},trackVideo:function(e,n,t,i){return v(e,n,t,i)},trackVideoDurationFull:function(e,n,t,i){return m(e,n,t,i)},track:function(e){return h(e)},setIdentity:e,firePageView:o,loadAllTracking:a}}),Box.Application.getService("gaTracking")}),define("modules/payReportNow/scripts/index",["services/enquiryService","services/utils","doT!modules/payReportNow/views/pay-report-now","doT!modules/payReportNow/views/request-removal","services/configService","modules/gaTracking/scripts/services/gaTracking"],function(e,n,t,i,o){Box.Application.addModule("payReportNow",function(o){function a(e,t){window.location.pathname!=e.split("#")[0]&&d.inWhichPopup?window.location.assign(e):(d.inWhichPopup&&Box.Application.broadcast("popup:close",{id:d.inWhichPopup}),setTimeout(function(){n.openPopup(t)},300))}function r(e){o.broadcast(e+"-clicked",{id:p.id})}function u(){"penalizeSeller"===d.inWhichPopup?c():s()}function c(){m.html(i())}function s(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l.extend(!0,n,d),m.html(t(n)),v=g.find(h),f=g.find(y),e.getLeadStats().then(function(e){e.leadsClosedNotPaid>0&&(v.removeClass("hide"),f.removeClass("btnv2-p"))})}var d,p,l,g,v,f,m,h='[data-type="pay-now"]',y='[data-type="report-now"]';return{init:function(){d=o.getConfig()||{},p=o.getElement(),l=o.getGlobal("jQuery"),g=l(p),m=g.find(".js-button-space"),u()},destroy:function(){var e=g.find('script[type="text/x-config"]');g.html(e),d=null,p=null,l=null,g=null,loginService=null},onclick:function(e,n,t){switch(t){case"remove-penalization":s();break;case"pay-now":case"report-now":var i=l(n).attr("href"),o=l(n).data("openPopup");r(t),a(i,o)}}}})});