define("services/listingService",["services/apiService","services/urlService","services/utils"],function(i,e,n){var t="listingService";return Box.Application.addService(t,function(){function n(e){return i.get(g.getListings(e))}function t(e){return i.postJSON(g.markListingForRepost(e))}function r(e){return i.patch(g.repostListings({listingId:e}))}function o(e){return i.get(g.getListingsToImproveScore(e))}function s(e){return i.get(g.originalDescription({listingId:e}))}function c(){return i.get(g.getTenantPreferencesQuestionaire())}var g={getListings:function(i){var n=e.getAllUrlParam();i=$.extend({},n,i);var t="/listing-repost";return i?e.getURLWithSelectors(t,i):t},markListingForRepost:function(i){var n="xhr/listingService/markPendingRepost";return e.getURLWithSelectors(n,i)},repostListings:function(i){var e=i.listingId;return"/xhr/delete/repost?listingId="+e},getListingsToImproveScore:function(i){return"/xhr/sellerListing/getListingsToImproveScore?sellerId="+i},originalDescription:function(i){var e=i.listingId;return"/xhr/sellerListing/originalDescription?listingIds="+e},getTenantPreferencesQuestionaire:function(){return"/xhr/master-profiling-questionaire"}};return{getListings:n,markForRepost:t,repostListing:r,getListingsToImproveScore:o,getOriginalDescription:s,getTenantPreferencesQuestionaire:c}}),Box.Application.getService(t)}),define("modules/listProperty/submodules/originalDescription",["services/commonService","services/listingService","modules/controls/scripts/controlsService"],function(i,e,n){var t="originalDescription";Box.Application.addModule(t,function(i){function n(i){o.find(l.SELECTOR.DESCRIPTION_BOX).html()||(t("show"),e.getOriginalDescription(i).then(function(i){i&&i.description?o.find(l.SELECTOR.DESCRIPTION_BOX).html(i.description):o.find(l.SELECTOR.DESCRIPTION_BOX).html(l.NO_DESCRIPTION),t("hide")},function(i){o.find(l.SELECTOR.DESCRIPTION_BOX).html(l.ERROR),t("hide")}))}function t(i){"show"===i?g.removeClass("hide"):g.addClass("hide")}var r=void 0,o=void 0,s=void 0,c=void 0,g=void 0,l={SELECTOR:{DESCRIPTION_BOX:".js-original-description",POPUP:"#originalDescriptionModalPopup",LOADER:".main-loading"},ERROR:"some error occurred, try again",NO_DESCRIPTION:"original description does not exists for the property"};return{init:function(){r=i.getElement(),c=i.getGlobal("jQuery"),o=c(r),s=i.getConfig(),g=c(l.SELECTOR.POPUP+" "+l.SELECTOR.LOADER),i.broadcast("moduleLoaded",{id:r.id})},destroy:function(){c=null,r=null,o=null,s=null},messages:["popup:open"],onmessage:function(i,e){if(e.id==r.id)switch(i){case"popup:open":var t=e.options.config.data&&e.options.config.data.listingId||utils.getParameterByName("listingId");t&&n(t)}}}})});